# 多进程编程
### 小组名称：Lung good team
### 小组成员：杭锦泉 滕飞 朱君楷
***
# 一、实验目的
1.学会创建多进程程序,理解fork(),vfork() 创建的子进程的特点。

2.学会使用有名管道和无名管道实现进程间通信。

3.学会使用信号机制实现进程间通信。
***
# 二、实验内容
1.编写fork(),vfork()多进程程序,通过输出结果比较所创建的子进程的不同之处。

2.编写fork()多进程程序,进程间模拟信号通信,包括信号发送、捕捉与处理。

3.编写fork()多进程程序,进程间实现有名管道和无名管道通信。具体要求如下:

* 编写1个服务器程序server.c和2个客户端程序client1.c,client2.c ,服务器和客户端之间采用FIFO管道通信;
* 服务器和客户端各自创建自己的子进程,父进程负责
完成FIFO管道通信,子进程负责输出接收到的信息,
父子进程间采用无名管道通信。
***
# 三、实验过程和结果
## A、编写fork(),vfork()多进程程序,通过输出结果比较所创建的子进程的不同之处。

### 1、fork()&vfork()
fork()调用执行一次会返回2个值(考虑错误信息实际为3个值),如果
返回父进程,fork()返回子进程的进程号,如果返回子进程,fork()
则返回0,错误则返回-1

两者被调用一次，但是返回两次。两次返回的唯一区别是子进程的返回值是0，而父进程的返回值则是新子进程的进程ID。

### 2、分别用fork和vfork函数创建子进程
#### 1)pid_t fork(void)
`pid_t vfork(void)`

![2_1](https://github.com/Meleus/Lunggoodteam/blob/master/screencut/HW2/2_1.png)
#### 2)先编译并运行fork()函数
![2_2](https://github.com/Meleus/Lunggoodteam/blob/master/screencut/HW2/2_2.png)
#### 3)再编译并运行vfork()函数
![2_3](https://github.com/Meleus/Lunggoodteam/blob/master/screencut/HW2/2_3.png)
### 3、总结
* fork()用于创建一个新进程。由fork()创建的子进程是父进程的副本。即子进程获取父进程数据空间，堆和 栈的副本。父子进程之间不共享这些存储空间的部分。而vfork()创建的进程并不将父进程的地址空间完全复制到子进程中，因为子进程会立即调用exec (或exit)于是也就不会存放该地址空间。相反，在子进程调用exec或exit之前，它在父进程的空间进行。
* vfork()与fork()另一个区别就是：vfork保证子进程先运行，在调用exec或exit之前与父进程数据是共享的,在它调用exec或exit之后父进程才可能被调度运行。
* vfork和fork之间的还有一个区别是： vfork保证子进程先运行，在她调用exec或exit之后父进程才可能被调度运行。如果在调用这两个函数之前子进程依赖于父进程的进一步动作，则会导致死锁。
***
